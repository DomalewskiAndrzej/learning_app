<div class="progress-bar">
  <mat-progress-bar
    *ngIf="requestInProgress"
    mode="indeterminate"
  ></mat-progress-bar>
</div>
<mat-toolbar class="toolbar">
  <div>
    <button
      (click)="onNavigateBack()"
      *ngIf="!sidenav"
      [matTooltip]="'Navigate back'"
      class="toolbar__button"
      mat-icon-button
      type="button"
    >
      <mat-icon>keyboard_backspace</mat-icon>
    </button>
  </div>
  <div>
    <button
      (click)="onLoadTodosInProgressNotifications()"
      [matMenuTriggerFor]="todosInProgessMenu"
      [matTooltip]="'Todos in progress'"
      class="toolbar__button"
      mat-icon-button
      type="button"
    >
      <mat-icon
        [matBadgeHidden]="!todosInProgressNotificationsQuantity"
        [matBadge]="todosInProgressNotificationsQuantity"
        matBadgeColor="accent"
        matBadgePosition="after"
        matBadgeSize="small"
        >event_busy
      </mat-icon>
    </button>
    <button
      (click)="onLoadNotifications()"
      [matMenuTriggerFor]="notificationsMenu"
      [matTooltip]="'Notifications'"
      class="toolbar__button"
      mat-icon-button
      type="button"
    >
      <mat-icon
        [matBadgeHidden]="!notificationsQuantity"
        [matBadge]="notificationsQuantity"
        matBadgeColor="warn"
        matBadgePosition="after"
        matBadgeSize="small"
        >notifications
      </mat-icon>
    </button>
  </div>
</mat-toolbar>
<div class="content">
  <ng-content></ng-content>
</div>
<mat-menu
  #todosInProgessMenu="matMenu"
  class="menu-notifications"
  xPosition="before"
>
  <ng-template matMenuContent>
    <app-ui-notification
      (loadItems)="onLoadTodosInProgressNotifications()"
      [notifications]="todosInProgressNotifications"
      [quantity]="todosInProgressNotificationsQuantity"
      [spinner]="notificationsRequestInProgress | async"
    ></app-ui-notification>
  </ng-template>
</mat-menu>
<mat-menu
  #notificationsMenu="matMenu"
  class="menu-notifications"
  xPosition="before"
>
  <ng-template matMenuContent>
    <app-ui-notification
      (loadItems)="onLoadNotifications()"
      [notifications]="notifications"
      [quantity]="notificationsQuantity"
      [spinner]="notificationsRequestInProgress | async"
    ></app-ui-notification>
  </ng-template>
</mat-menu>
